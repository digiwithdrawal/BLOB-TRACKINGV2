<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>BlobTrack Cam V2</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="app">
    <video id="vid" autoplay playsinline muted></video>
    <canvas id="screen"></canvas>

    <!-- START overlay (iOS permission works best from a tap) -->
    <div id="startOverlay" class="startOverlay">
      <div class="startCard">
        <div class="startTitle">BLOBTRACK CAM V2</div>
        <div class="startSub">Tap START to request camera access.</div>
        <button id="startBtn" class="btn primary full">START</button>
        <pre id="errBox" class="errBox"></pre>
        <div class="startHint">Must be <b>https://</b> in Safari.</div>
      </div>
    </div>

    <header class="top">
      <div class="brand">
        <div class="dot"></div>
        <div class="txt">
          <div class="t1">BLOBTRACK CAM V2</div>
          <div class="t2">TOUCHDESIGNER HUD â€¢ PHOTO + REC</div>
        </div>
      </div>
      <button id="flip" class="btn glass">FLIP</button>
    </header>

    <!-- always-recover HUD -->
    <button id="showHud" class="floatHud">SHOW HUD</button>

    <section class="panel" id="panel">
      <div class="row">
        <div class="pill">
          <div class="pillLabel">Format</div>
          <select id="format">
            <option value="auto" selected>AUTO</option>
            <option value="portrait">PORTRAIT</option>
            <option value="landscape">LANDSCAPE 16:9</option>
            <option value="square">SQUARE 1:1</option>
          </select>
        </div>

        <div class="pill">
          <div class="pillLabel">Overlay</div>
          <select id="ink">
            <option value="white" selected>WHITE</option>
            <option value="neon">NEON GREEN</option>
            <option value="ice">LIGHT BLUE</option>
            <option value="red">RED</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="pill wide">
          <div class="pillLabel">Gate</div>
          <select id="gate">
            <option value="off" selected>OFF</option>
            <option value="face">FACE</option>
            <option value="person">PERSON</option>
          </select>
        </div>
      </div>

      <div class="togRow">
        <label class="tog"><input id="t_matrix" type="checkbox" checked><span>MATRIX</span></label>
      </div>

      <div class="sliders">
        <div class="srow"><div class="slabel">AMOUNT</div><input id="s_amount" type="range" min="10" max="260" value="120"></div>
        <div class="srow"><div class="slabel">ATMOS</div><input id="s_atmo" type="range" min="0" max="100" value="55"></div>
        <div class="srow"><div class="slabel">FX</div><input id="s_fx" type="range" min="0" max="100" value="60"></div>
        <div class="srow"><div class="slabel">RES</div><input id="s_res" type="range" min="240" max="1440" value="900"></div>
      </div>

      <div class="actions">
        <button id="snap" class="btn">SNAP</button>
        <button id="rec" class="btn primary">REC</button>
        <button id="hud" class="btn">HIDE HUD</button>
      </div>

      <div class="tip" id="tip">Auto format follows rotation. Manual overrides.</div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
